<!DOCTYPE html>
<html lang="nl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <meta name="theme-color" content="#1a1a2e" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <meta name="apple-mobile-web-app-title" content="Holy Mackerel!" />
  <meta name="description" content="Tenniscompetitie app voor jouw team" />
  <title>ğŸ¾ Holy Mackerel!</title>

  <!-- React via CDN â€” geen installatie nodig -->
  <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;600;700;800;900&display=swap" rel="stylesheet" />

  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body { background: #f7f7f5; font-family: 'DM Sans', 'Segoe UI', sans-serif; }
    input:focus, select:focus { border-color: #e53935 !important; outline: none; }
    a { text-decoration: none; }
    ::-webkit-scrollbar { width: 4px; height: 4px; }
    ::-webkit-scrollbar-thumb { background: #ddd; border-radius: 4px; }
    .hide-scroll::-webkit-scrollbar { display: none; }
  </style>
</head>
<body>
  <div id="root"></div>

  <script type="text/babel">
    const { useState, useEffect } = React;

    // â”€â”€ STORAGE (localStorage) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    function load(key, fallback) {
      try { const r = localStorage.getItem(key); return r ? JSON.parse(r) : fallback; }
      catch { return fallback; }
    }
    function save(key, value) {
      try { localStorage.setItem(key, JSON.stringify(value)); } catch {}
    }

    // â”€â”€ INITIAL DATA â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    const INIT_PLAYERS = [
      { id:1, name:"Lisa",  emoji:"ğŸ¾", wins:3, losses:1, sets_won:7,  sets_lost:3,  aces:12, rating:"7.2" },
      { id:2, name:"Mark",  emoji:"ğŸ”¥", wins:2, losses:2, sets_won:5,  sets_lost:6,  aces:8,  rating:"6.8" },
      { id:3, name:"Sara",  emoji:"âš¡", wins:4, losses:0, sets_won:8,  sets_lost:1,  aces:21, rating:"8.1" },
      { id:4, name:"Tom",   emoji:"ğŸ†", wins:1, losses:3, sets_won:3,  sets_lost:8,  aces:5,  rating:"6.2" },
      { id:5, name:"Eva",   emoji:"ğŸŒŸ", wins:2, losses:1, sets_won:6,  sets_lost:4,  aces:9,  rating:"7.0" },
      { id:6, name:"Bas",   emoji:"ğŸ’ª", wins:0, losses:4, sets_won:2,  sets_lost:9,  aces:3,  rating:"5.9" },
    ];
    const INIT_CLUBS = [
      { id:1, name:"TC De Reling",         city:"Rotterdam",          address:"Sportlaan 12, Rotterdam",          home:true  },
      { id:2, name:"TC Nieuw Lekkerland",  city:"Nieuw Lekkerland",   address:"Tennisweg 3, Nieuw Lekkerland",    home:false },
      { id:3, name:"LTC Capelle",          city:"Capelle a/d IJssel", address:"IJssellaan 8, Capelle a/d IJssel", home:false },
      { id:4, name:"TC Ridderkerk",        city:"Ridderkerk",         address:"Sportveld 5, Ridderkerk",          home:false },
    ];
    const INIT_MATCHES = [
      { id:1, date:"10 feb", clubId:1, opponent:"TC Riviera",          players:[1,3], score:"4-2", done:true,  sets:[{p:"Lisa",s:"6-3, 6-2"},{p:"Sara",s:"6-1, 6-0"}] },
      { id:2, date:"17 feb", clubId:2, opponent:"TC Nieuw Lekkerland", players:[],    score:"",    done:false, sets:[] },
      { id:3, date:"24 feb", clubId:1, opponent:"LTC Capelle",         players:[],    score:"",    done:false, sets:[] },
      { id:4, date:"3 mrt",  clubId:4, opponent:"TC Ridderkerk",       players:[],    score:"",    done:false, sets:[] },
    ];
    const INIT_KNLTB = [
      { rank:1, team:"TC Riviera",          played:5, pts:13 },
      { rank:2, team:"TC De Reling â˜…",      played:4, pts:10 },
      { rank:3, team:"LTC Capelle",         played:4, pts:9  },
      { rank:4, team:"TC Nieuw Lekkerland", played:5, pts:7  },
      { rank:5, team:"TC Ridderkerk",       played:3, pts:4  },
    ];
    const DEFAULT_CHALLENGES = [
      { id:1, icon:"âš¡", title:"Ace Machine",       desc:"5 aces in Ã©Ã©n wedstrijd",      pts:50  },
      { id:2, icon:"ğŸ¯", title:"Breakpoint Killer", desc:"3 breakpoints op rij",         pts:30  },
      { id:3, icon:"ğŸ”¥", title:"Comeback King",     desc:"Win na 0-5 achterstand",       pts:100 },
      { id:4, icon:"ğŸ†", title:"Bagel!",            desc:"Win een set met 6-0",          pts:75  },
      { id:5, icon:"ğŸŒŸ", title:"Spirit Award",      desc:"Gekozen als sportiest speler", pts:40  },
      { id:6, icon:"ğŸ’ª", title:"IJzeren wil",       desc:"Speel 3 weken op rij",         pts:60  },
    ];
    const EMOJIS = ["ğŸ¾","ğŸ”¥","âš¡","ğŸ†","ğŸŒŸ","ğŸ’ª","ğŸ¯","ğŸ˜","ğŸ¦","ğŸ¯","ğŸ¦…","ğŸŒŠ","â­","ğŸš€","ğŸ’¥","ğŸª"];
    const TABS = [
      { id:"scores", icon:"ğŸ¾", label:"Scores" },
      { id:"stand",  icon:"ğŸ†", label:"Stand"  },
      { id:"schema", icon:"ğŸ“…", label:"Schema" },
      { id:"stats",  icon:"ğŸ“Š", label:"Stats"  },
      { id:"fun",    icon:"âš¡", label:"Fun"    },
      { id:"beheer", icon:"âš™ï¸", label:"Beheer" },
    ];

    // â”€â”€ SHARED UI â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    function TabBar({ active, setActive }) {
      return (
        <nav style={S.tabBar}>
          {TABS.map(t => (
            <button key={t.id} onClick={() => setActive(t.id)}
              style={{...S.tabBtn, ...(active===t.id ? S.tabActive : {})}}>
              <span style={{fontSize: t.id==="beheer" ? 16 : 20}}>{t.icon}</span>
              <span style={S.tabLabel}>{t.label}</span>
              {active===t.id && <span style={S.tabIndicator} />}
            </button>
          ))}
        </nav>
      );
    }

    function SectionLabel({ children, action }) {
      return (
        <div style={{...S.section, display:"flex", justifyContent:"space-between", alignItems:"center"}}>
          <span>{children}</span>
          {action}
        </div>
      );
    }

    function Modal({ title, onClose, children }) {
      return (
        <div style={S.modalOverlay} onClick={onClose}>
          <div style={S.modalBox} onClick={e => e.stopPropagation()}>
            <div style={S.modalHeader}>
              <span style={S.modalTitle}>{title}</span>
              <button style={S.modalClose} onClick={onClose}>âœ•</button>
            </div>
            <div style={{padding:"0 16px 24px"}}>{children}</div>
          </div>
        </div>
      );
    }

    // â”€â”€ SCORES â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    function ScoresScreen({ matches, setMatches, players, clubs }) {
      const [editing, setEditing] = useState(null);
      const [form, setForm] = useState({ score:"", sets:[] });
      const club = id => clubs.find(c=>c.id===id)||{};
      const plr  = id => players.find(p=>p.id===id)||{};

      function startEdit(m) {
        setEditing(m.id);
        setForm({
          score: m.score,
          sets: m.players.length
            ? m.players.map(pid => ({p:plr(pid).name||"", s:m.sets.find(s=>s.p===plr(pid).name)?.s||""}))
            : m.sets,
        });
      }
      function saveScore(m) {
        const updated = matches.map(x => x.id===m.id ? {...x, score:form.score, sets:form.sets, done:true} : x);
        setMatches(updated); save("matches", updated); setEditing(null);
      }
      function togglePlayer(matchId, pid) {
        const updated = matches.map(m => {
          if (m.id!==matchId) return m;
          const has = m.players.includes(pid);
          const next = has ? m.players.filter(p=>p!==pid) : m.players.length<4 ? [...m.players,pid] : m.players;
          return {...m, players:next};
        });
        setMatches(updated); save("matches", updated);
      }
      const live = matches.filter(m=>!m.done);
      const done = matches.filter(m=> m.done);

      return (
        <div style={S.screen}>
          {live.length>0 && <>
            <SectionLabel>ğŸ”´ KOMENDE WEDSTRIJDEN</SectionLabel>
            {live.map(m => {
              const cl = club(m.clubId);
              return (
                <div key={m.id} style={{...S.card, borderLeft:"4px solid #e53935"}}>
                  <div style={S.matchHeader}>
                    <div style={{flex:1}}>
                      <div style={S.matchTitle}>vs {m.opponent}</div>
                      <div style={S.matchMeta}>ğŸ“… {m.date} Â· {cl.home?"ğŸ  Thuis":"âœˆï¸ Uit"}</div>
                      {!cl.home && <div style={S.matchMeta}>ğŸ“ {cl.address}</div>}
                    </div>
                    {!cl.home && (
                      <a href={`https://maps.google.com/?q=${encodeURIComponent(cl.address||cl.name)}`}
                        target="_blank" rel="noreferrer" style={S.mapBtn}>ğŸ—ºï¸ Route</a>
                    )}
                  </div>
                  <div style={S.subLabel}>ğŸ‘¥ SPELERS ({m.players.length}/4)</div>
                  <div style={S.playerGrid}>
                    {players.map(p => {
                      const sel = m.players.includes(p.id);
                      const full = m.players.length>=4 && !sel;
                      return (
                        <button key={p.id} onClick={() => !full && togglePlayer(m.id, p.id)}
                          style={{...S.playerChip, ...(sel?S.playerChipSel:{}), opacity:full?0.35:1}}>
                          {p.emoji} {p.name}{sel?" âœ“":""}
                        </button>
                      );
                    })}
                  </div>
                  {editing===m.id ? (
                    <div style={S.editBox}>
                      <input style={S.input} placeholder="Teamscore (bijv. 4-2)"
                        value={form.score} onChange={e=>setForm(f=>({...f,score:e.target.value}))}/>
                      {form.sets.map((s,i) => (
                        <div key={i} style={{display:"flex",gap:8,alignItems:"center"}}>
                          <span style={{fontSize:13,color:"#888",minWidth:52}}>{s.p}</span>
                          <input style={{...S.input,flex:1}} placeholder="6-3, 7-5"
                            value={s.s} onChange={e=>{const ns=[...form.sets];ns[i]={...ns[i],s:e.target.value};setForm(f=>({...f,sets:ns}));}}/>
                        </div>
                      ))}
                      <div style={S.btnRow}>
                        <button style={S.btnPrimary} onClick={()=>saveScore(m)}>âœ… Opslaan</button>
                        <button style={S.btnSecondary} onClick={()=>setEditing(null)}>Annuleer</button>
                      </div>
                    </div>
                  ) : (
                    <button style={{...S.btnPrimary,width:"100%"}} onClick={()=>startEdit(m)}>ğŸ“ Score invoeren</button>
                  )}
                </div>
              );
            })}
          </>}
          <SectionLabel>âœ… GESPEELD</SectionLabel>
          {done.map(m => {
            const cl = club(m.clubId);
            return (
              <div key={m.id} style={{...S.card, borderLeft:"4px solid #4caf50", opacity:0.92}}>
                <div style={S.matchHeader}>
                  <div style={{flex:1}}>
                    <div style={S.matchTitle}>vs {m.opponent}</div>
                    <div style={S.matchMeta}>ğŸ“… {m.date} Â· {cl.home?"ğŸ  Thuis":"âœˆï¸ Uit"}</div>
                  </div>
                  <div style={{fontSize:26,fontWeight:900,color:"#e53935"}}>{m.score}</div>
                </div>
                {m.sets.length>0 && (
                  <div style={{marginTop:10,paddingTop:10,borderTop:"1px solid #f5f5f5"}}>
                    {m.sets.map((s,i) => (
                      <div key={i} style={{display:"flex",justifyContent:"space-between",padding:"3px 0"}}>
                        <span style={{fontSize:13,fontWeight:600,color:"#555"}}>{s.p}</span>
                        <span style={{fontSize:13,fontWeight:700,color:"#4caf50"}}>{s.s}</span>
                      </div>
                    ))}
                  </div>
                )}
                {m.players.length>0 && (
                  <div style={{display:"flex",gap:6,flexWrap:"wrap",marginTop:8}}>
                    {m.players.map(pid=>{const p=plr(pid);return(<span key={pid} style={S.playerTag}>{p.emoji} {p.name}</span>);})}
                  </div>
                )}
              </div>
            );
          })}
        </div>
      );
    }

    // â”€â”€ STAND â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    function StandScreen({ players, knltb, setKnltb }) {
      const [editKnltb, setEditKnltb] = useState(false);
      const [form, setForm] = useState(knltb);
      const sorted = [...players].sort((a,b)=>b.wins-a.wins||b.sets_won-a.sets_won);
      const medals = ["ğŸ¥‡","ğŸ¥ˆ","ğŸ¥‰"];
      function saveKnltb() { setKnltb(form); save("knltb",form); setEditKnltb(false); }
      return (
        <div style={S.screen}>
          <SectionLabel>ğŸ‘¥ TEAM INDIVIDUEEL</SectionLabel>
          {sorted.map((p,i)=>{
            const total=p.wins+p.losses, pct=total?Math.round(p.wins/total*100):0;
            return (
              <div key={p.id} style={{...S.card,
                background:i===0?"linear-gradient(135deg,#fff9e6,#fff3cc)":i===1?"linear-gradient(135deg,#f5f5f5,#ececec)":"#fff",
                borderLeft:`4px solid ${i===0?"#ffc107":i===1?"#9e9e9e":i===2?"#ff7043":"#e0e0e0"}`}}>
                <div style={{display:"flex",alignItems:"center",gap:10}}>
                  <span style={{fontSize:22,minWidth:32}}>{medals[i]||`#${i+1}`}</span>
                  <span style={{fontSize:24}}>{p.emoji}</span>
                  <div style={{flex:1}}>
                    <div style={S.playerName}>{p.name}</div>
                    <div style={{display:"flex",gap:6,marginTop:4,flexWrap:"wrap"}}>
                      <span style={{...S.chip,background:"#e8f5e9"}}>âœ… {p.wins}W</span>
                      <span style={{...S.chip,background:"#fce4ec"}}>âŒ {p.losses}L</span>
                      <span style={{...S.chip,background:"#e3f2fd"}}>ğŸ¾ {p.sets_won} sets</span>
                      <span style={{...S.chip,background:"#f3e5f5"}}>âš¡ {p.aces} aces</span>
                    </div>
                    <div style={S.barWrap}><div style={{...S.barFill,width:`${pct}%`}}/></div>
                    <div style={{fontSize:11,color:"#aaa",marginTop:2}}>{pct}% winratio Â· KNLTB {p.rating}</div>
                  </div>
                  <span style={{fontSize:30,fontWeight:900,color:"#e53935"}}>{p.wins}</span>
                </div>
              </div>
            );
          })}
          <SectionLabel action={<button style={S.btnSmall} onClick={()=>{setForm(knltb);setEditKnltb(!editKnltb);}}>{editKnltb?"âœ• Sluiten":"âœï¸ Bijwerken"}</button>}>
            ğŸŸï¸ KNLTB RANGLIJST
          </SectionLabel>
          {editKnltb ? (
            <div style={S.card}>
              <div style={{fontSize:12,color:"#888",marginBottom:10}}>Kopieer de stand van knltb.nl en vul in:</div>
              {form.map((row,i)=>(
                <div key={i} style={{display:"flex",gap:6,marginBottom:8,alignItems:"center"}}>
                  <span style={{fontWeight:700,color:"#aaa",minWidth:20,fontSize:13}}>#{i+1}</span>
                  <input style={{...S.input,flex:2}} placeholder="Teamnaam" value={row.team}
                    onChange={e=>{const n=[...form];n[i]={...n[i],team:e.target.value};setForm(n);}}/>
                  <input style={{...S.input,flex:1,textAlign:"center"}} placeholder="Gsp" type="number" value={row.played}
                    onChange={e=>{const n=[...form];n[i]={...n[i],played:+e.target.value};setForm(n);}}/>
                  <input style={{...S.input,flex:1,textAlign:"center"}} placeholder="Pnt" type="number" value={row.pts}
                    onChange={e=>{const n=[...form];n[i]={...n[i],pts:+e.target.value};setForm(n);}}/>
                </div>
              ))}
              <div style={S.btnRow}>
                <button style={S.btnPrimary} onClick={saveKnltb}>âœ… Opslaan</button>
                <button style={S.btnSecondary} onClick={()=>setForm([...form,{rank:form.length+1,team:"Nieuw team",played:0,pts:0}])}>+ Rij</button>
              </div>
            </div>
          ) : (
            <div style={S.card}>
              <div style={{display:"flex",gap:8,padding:"0 0 8px",borderBottom:"1px solid #f0f0f0",marginBottom:8}}>
                {["#","TEAM","GSP","PNT"].map((h,i)=>(<span key={h} style={{fontWeight:800,fontSize:11,color:"#bbb",flex:i===1?1:"0 0 auto",width:i===0?24:i>=2?38:undefined,textAlign:i>=2?"center":"left"}}>{h}</span>))}
              </div>
              {knltb.map((row,i)=>{
                const us=row.team.includes("â˜…");
                return (
                  <div key={i} style={{display:"flex",gap:8,padding:us?"7px 8px":"6px 0",alignItems:"center",
                    background:us?"#fff3e0":"transparent",borderRadius:us?8:0,
                    borderBottom:i<knltb.length-1?"1px solid #f9f9f9":"none"}}>
                    <span style={{fontSize:16,flex:"0 0 24px"}}>{["ğŸ¥‡","ğŸ¥ˆ","ğŸ¥‰"][i]||`${i+1}.`}</span>
                    <span style={{flex:1,fontWeight:us?800:500,fontSize:14,color:us?"#e65100":"#333"}}>{row.team}</span>
                    <span style={{width:38,textAlign:"center",fontSize:13,color:"#888"}}>{row.played}</span>
                    <span style={{width:38,textAlign:"right",fontWeight:700,fontSize:15,color:us?"#e65100":"#333"}}>{row.pts}</span>
                  </div>
                );
              })}
            </div>
          )}
        </div>
      );
    }

    // â”€â”€ SCHEMA â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    function SchemaScreen({ matches, clubs, players }) {
      const club = id => clubs.find(c=>c.id===id)||{};
      const plr  = id => players.find(p=>p.id===id)||{};
      return (
        <div style={S.screen}>
          <SectionLabel>ğŸ“… COMPETITIESCHEMA</SectionLabel>
          {matches.map(m=>{
            const cl=club(m.clubId);
            return (
              <div key={m.id} style={{...S.card,borderLeft:`4px solid ${m.done?"#4caf50":"#2196f3"}`}}>
                <div style={{display:"flex",justifyContent:"space-between",alignItems:"flex-start"}}>
                  <div style={{flex:1}}>
                    <div style={S.matchTitle}>vs {m.opponent}</div>
                    <div style={S.matchMeta}>ğŸ“… {m.date}</div>
                    <div style={S.matchMeta}>{cl.home?"ğŸ ":"âœˆï¸"} {cl.name}, {cl.city}</div>
                    <div style={S.matchMeta}>ğŸ“ {cl.address}</div>
                  </div>
                  <div style={{display:"flex",flexDirection:"column",alignItems:"flex-end",gap:6}}>
                    <span style={{...S.chip,background:m.done?"#e8f5e9":"#e3f2fd"}}>{m.done?"âœ… Gespeeld":"ğŸ”µ Gepland"}</span>
                    {m.score&&<span style={{fontWeight:900,fontSize:20,color:"#e53935"}}>{m.score}</span>}
                  </div>
                </div>
                {!cl.home&&(
                  <a href={`https://maps.google.com/?q=${encodeURIComponent(cl.address||cl.name)}`}
                    target="_blank" rel="noreferrer"
                    style={{...S.mapBtn,display:"inline-flex",marginTop:10,width:"100%",justifyContent:"center"}}>
                    ğŸ—ºï¸ Route naar {cl.name}
                  </a>
                )}
                {m.players.length>0&&(
                  <div style={{marginTop:10}}>
                    <div style={S.subLabel}>ğŸ‘¥ GESELECTEERDE SPELERS</div>
                    <div style={{display:"flex",gap:6,flexWrap:"wrap"}}>
                      {m.players.map(pid=>{const p=plr(pid);return(<span key={pid} style={S.playerTag}>{p.emoji} {p.name}</span>);})}
                    </div>
                  </div>
                )}
              </div>
            );
          })}
          <SectionLabel>ğŸ“ CLUBS IN DE POULE</SectionLabel>
          {clubs.map(c=>(
            <div key={c.id} style={{...S.card,display:"flex",alignItems:"center",gap:12}}>
              <span style={{fontSize:28}}>{c.home?"ğŸ ":"âœˆï¸"}</span>
              <div style={{flex:1}}>
                <div style={{fontWeight:700,fontSize:15}}>{c.name}</div>
                <div style={{fontSize:12,color:"#888"}}>{c.address}</div>
              </div>
              {!c.home&&(<a href={`https://maps.google.com/?q=${encodeURIComponent(c.address)}`} target="_blank" rel="noreferrer" style={S.mapBtn}>ğŸ—ºï¸</a>)}
            </div>
          ))}
        </div>
      );
    }

    // â”€â”€ STATS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    function StatsScreen({ players, setPlayers }) {
      const [selId,   setSelId]   = useState(null);
      const [editing, setEditing] = useState(false);
      const [form,    setForm]    = useState({});

      // Pick first player once players are available
      const activeId = selId || (players.length > 0 ? players[0].id : null);
      const p = players.find(x=>x.id===activeId) || null;

      if (!p) return (
        <div style={S.screen}>
          <div style={{...S.card, textAlign:"center", padding:40, color:"#aaa"}}>
            <div style={{fontSize:40,marginBottom:12}}>ğŸ‘¤</div>
            <div style={{fontWeight:700}}>Geen spelers gevonden</div>
            <div style={{fontSize:13,marginTop:6}}>Voeg eerst spelers toe via âš™ï¸ Beheer</div>
          </div>
        </div>
      );

      function startEdit() { setForm({...p}); setEditing(true); }
      function saveEdit()  {
        const updated=players.map(x=>x.id===p.id?{...x,...form}:x);
        setPlayers(updated); save("players",updated); setEditing(false);
      }
      const total=p.wins+p.losses, pct=total?Math.round(p.wins/total*100):0;
      const stTotal=p.sets_won+p.sets_lost, stPct=stTotal?Math.round(p.sets_won/stTotal*100):0;
      const acePct=Math.min(100,Math.round(p.aces/Math.max(1,total)*20));
      return (
        <div style={S.screen}>
          <div className="hide-scroll" style={S.playerScroll}>
            {players.map(pl=>(
              <button key={pl.id} onClick={()=>{setSelId(pl.id);setEditing(false);}}
                style={{...S.playerScrollBtn,...(activeId===pl.id?S.playerScrollBtnSel:{})}}>
                <span style={{fontSize:22}}>{pl.emoji}</span>
                <span style={{fontSize:11,fontWeight:700,color:"inherit"}}>{pl.name}</span>
              </button>
            ))}
          </div>
          <div style={{...S.card,background:"linear-gradient(135deg,#1a1a2e,#16213e)",color:"#fff",marginBottom:12}}>
            <div style={{display:"flex",justifyContent:"space-between",alignItems:"center"}}>
              <div>
                <div style={{fontSize:34}}>{p.emoji}</div>
                <div style={{fontSize:22,fontWeight:900,marginTop:4}}>{p.name}</div>
                <div style={{fontSize:11,color:"#ff9a7b",letterSpacing:1.5,marginTop:2}}>KNLTB RATING Â· {p.rating}</div>
              </div>
              <div style={{textAlign:"right"}}>
                <div style={{fontSize:52,fontWeight:900,color:"#ff5722",lineHeight:1}}>{pct}%</div>
                <div style={{fontSize:11,color:"#aaa"}}>win ratio</div>
              </div>
            </div>
            <div style={{display:"flex",gap:8,marginTop:16,flexWrap:"wrap"}}>
              {[["âœ…",p.wins,"Gewonnen"],["âŒ",p.losses,"Verloren"],["ğŸ¾",p.sets_won,"Sets"],["âš¡",p.aces,"Aces"]].map(([ic,val,lab])=>(
                <div key={lab} style={{textAlign:"center",flex:1,minWidth:56,background:"rgba(255,255,255,.07)",borderRadius:10,padding:"10px 4px"}}>
                  <div style={{fontSize:18}}>{ic}</div>
                  <div style={{fontSize:22,fontWeight:900}}>{val}</div>
                  <div style={{fontSize:10,color:"#aaa",textTransform:"uppercase",letterSpacing:.5}}>{lab}</div>
                </div>
              ))}
            </div>
          </div>
          <div style={S.card}>
            {[["Winratio",pct,"#4caf50"],["Sets gewonnen",stPct,"#2196f3"],["Aces/wedstrijd",acePct,"#ff5722"]].map(([lab,val,col])=>(
              <div key={lab} style={{marginBottom:14}}>
                <div style={{display:"flex",justifyContent:"space-between",fontSize:13,fontWeight:600,marginBottom:4}}>
                  <span>{lab}</span><span style={{color:col}}>{val}%</span>
                </div>
                <div style={S.barWrap}><div style={{...S.barFill,width:`${val}%`,background:col}}/></div>
              </div>
            ))}
          </div>
          {editing ? (
            <div style={S.card}>
              <div style={S.subLabel}>âœï¸ STATISTIEKEN BEWERKEN</div>
              {[["wins","Gewonnen"],["losses","Verloren"],["sets_won","Sets gewonnen"],["sets_lost","Sets verloren"],["aces","Aces"],["rating","KNLTB Rating"]].map(([key,lab])=>(
                <div key={key} style={{marginBottom:10}}>
                  <div style={{fontSize:12,color:"#888",marginBottom:3}}>{lab}</div>
                  <input style={S.input} value={form[key]||""} onChange={e=>setForm(f=>({...f,[key]:key==="rating"?e.target.value:+e.target.value}))}/>
                </div>
              ))}
              <div style={S.btnRow}>
                <button style={S.btnPrimary} onClick={saveEdit}>âœ… Opslaan</button>
                <button style={S.btnSecondary} onClick={()=>setEditing(false)}>Annuleer</button>
              </div>
            </div>
          ) : (
            <button style={{...S.btnPrimary,width:"100%",marginBottom:16}} onClick={startEdit}>âœï¸ Statistieken bewerken</button>
          )}
        </div>
      );
    }

    // â”€â”€ FUN â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    function FunScreen({ players, challenges }) {
      const [unlocked,setUnlocked]=useState(()=>load("unlocked",{}));
      function toggle(cid,pid){const key=`${cid}-${pid}`;const next={...unlocked,[key]:!unlocked[key]};setUnlocked(next);save("unlocked",next);}
      const pts=pid=>challenges.reduce((s,c)=>unlocked[`${c.id}-${pid}`]?s+c.pts:s,0);
      return (
        <div style={S.screen}>
          <SectionLabel>âš¡ CHALLENGES</SectionLabel>
          {challenges.map(c=>(
            <div key={c.id} style={S.card}>
              <div style={{display:"flex",alignItems:"center",gap:12,marginBottom:10}}>
                <span style={{fontSize:28}}>{c.icon}</span>
                <div style={{flex:1}}>
                  <div style={{fontWeight:800,fontSize:15}}>{c.title}</div>
                  <div style={{fontSize:12,color:"#888"}}>{c.desc}</div>
                </div>
                <span style={S.ptsBadge}>+{c.pts} pt</span>
              </div>
              <div style={{display:"flex",flexWrap:"wrap",gap:6}}>
                {players.map(p=>{const done=unlocked[`${c.id}-${p.id}`];return(
                  <button key={p.id} onClick={()=>toggle(c.id,p.id)}
                    style={{...S.challengeBtn,background:done?"#e53935":"#f5f5f5",color:done?"#fff":"#777",boxShadow:done?"0 2px 8px rgba(229,57,53,.4)":"none"}}>
                    {p.emoji}{done?" âœ“":""}
                  </button>
                );})}
              </div>
            </div>
          ))}
          <SectionLabel>ğŸ… CHALLENGE PUNTENSTAND</SectionLabel>
          {[...players].sort((a,b)=>pts(b.id)-pts(a.id)).map((p,i)=>(
            <div key={p.id} style={{...S.card,display:"flex",alignItems:"center",gap:12}}>
              <span style={{fontSize:22}}>{["ğŸ¥‡","ğŸ¥ˆ","ğŸ¥‰"][i]||`#${i+1}`}</span>
              <span style={{fontSize:22}}>{p.emoji}</span>
              <span style={{flex:1,fontWeight:700,fontSize:15}}>{p.name}</span>
              <span style={S.ptsBadge}>{pts(p.id)} pt</span>
            </div>
          ))}
        </div>
      );
    }

    // â”€â”€ BEHEER â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    function BeheerScreen({ players, setPlayers, matches, setMatches, clubs, setClubs, challenges, setChallenges }) {
      const [section,  setSection]  = useState("spelers");
      const [modal,    setModal]    = useState(null);
      const [editItem, setEditItem] = useState(null);

      const emptyPlayer = {name:"",emoji:"ğŸ¾",wins:0,losses:0,sets_won:0,sets_lost:0,aces:0,rating:""};
      const [pForm, setPForm] = useState(emptyPlayer);
      function openAddPlayer()   { setPForm(emptyPlayer); setEditItem(null); setModal("player"); }
      function openEditPlayer(p) { setPForm({...p});      setEditItem(p.id); setModal("player"); }
      function savePlayer() {
        if (!pForm.name.trim()) return;
        const updated = editItem
          ? players.map(p=>p.id===editItem?{...p,...pForm}:p)
          : [...players, {...pForm, id:Math.max(0,...players.map(p=>p.id))+1}];
        setPlayers(updated); save("players",updated); setModal(null);
      }
      function deletePlayer(id) {
        if (!confirm("Speler verwijderen?")) return;
        const updated=players.filter(p=>p.id!==id);
        setPlayers(updated); save("players",updated);
      }

      const emptyMatch = {date:"",clubId:clubs[0]?.id||1,opponent:"",players:[],score:"",done:false,sets:[]};
      const [mForm, setMForm] = useState(emptyMatch);
      function openAddMatch()   { setMForm({...emptyMatch,clubId:clubs[0]?.id||1}); setEditItem(null); setModal("match"); }
      function openEditMatch(m) { setMForm({...m}); setEditItem(m.id); setModal("match"); }
      function saveMatch() {
        if (!mForm.opponent.trim()||!mForm.date.trim()) return;
        const updated = editItem
          ? matches.map(m=>m.id===editItem?{...m,...mForm}:m)
          : [...matches, {...mForm, id:Math.max(0,...matches.map(m=>m.id))+1}];
        setMatches(updated); save("matches",updated); setModal(null);
      }
      function deleteMatch(id) {
        if (!confirm("Wedstrijd verwijderen?")) return;
        const updated=matches.filter(m=>m.id!==id);
        setMatches(updated); save("matches",updated);
      }

      const emptyClub = {name:"",city:"",address:"",home:false};
      const [cForm, setCForm] = useState(emptyClub);
      function openAddClub()   { setCForm(emptyClub); setEditItem(null); setModal("club"); }
      function openEditClub(c) { setCForm({...c});    setEditItem(c.id); setModal("club"); }
      function saveClub() {
        if (!cForm.name.trim()) return;
        const updated = editItem
          ? clubs.map(c=>c.id===editItem?{...c,...cForm}:c)
          : [...clubs, {...cForm, id:Math.max(0,...clubs.map(c=>c.id))+1}];
        setClubs(updated); save("clubs",updated); setModal(null);
      }
      function deleteClub(id) {
        if (!confirm("Club verwijderen?")) return;
        const updated=clubs.filter(c=>c.id!==id);
        setClubs(updated); save("clubs",updated);
      }

      // ---- CHALLENGE forms ----
      const CHALLENGE_ICONS = ["âš¡","ğŸ¯","ğŸ”¥","ğŸ†","ğŸŒŸ","ğŸ’ª","ğŸ¾","ğŸ˜","ğŸ¦","ğŸš€","ğŸ’¥","ğŸª","â­","ğŸŒŠ","ğŸ¦…","ğŸ¯"];
      const emptyChallenge = {icon:"âš¡", title:"", desc:"", pts:25};
      const [chForm, setChForm] = useState(emptyChallenge);
      function openAddChallenge()   { setChForm(emptyChallenge); setEditItem(null); setModal("challenge"); }
      function openEditChallenge(c) { setChForm({...c});         setEditItem(c.id); setModal("challenge"); }
      function saveChallenge() {
        if (!chForm.title.trim()) return;
        const updated = editItem
          ? challenges.map(c=>c.id===editItem?{...c,...chForm}:c)
          : [...challenges, {...chForm, id:Math.max(0,...challenges.map(c=>c.id))+1}];
        setChallenges(updated); save("challenges",updated); setModal(null);
      }
      function deleteChallenge(id) {
        if (!confirm("Challenge verwijderen?")) return;
        const updated=challenges.filter(c=>c.id!==id);
        setChallenges(updated); save("challenges",updated);
      }

      const getClub = id => clubs.find(c=>c.id===id)||{};
      const sections = [
        {id:"spelers",     label:"ğŸ‘¤ Spelers",     count:players.length},
        {id:"wedstrijden", label:"ğŸ¾ Wedstrijden", count:matches.length},
        {id:"clubs",       label:"ğŸ“ Clubs",       count:clubs.length},
        {id:"challenges",  label:"âš¡ Challenges",  count:challenges.length},
      ];

      return (
        <div style={S.screen}>
          <div style={S.segmentWrap}>
            {sections.map(sec=>(
              <button key={sec.id} onClick={()=>setSection(sec.id)}
                style={{...S.segmentBtn,...(section===sec.id?S.segmentBtnActive:{})}}>
                {sec.label} <span style={S.segmentCount}>{sec.count}</span>
              </button>
            ))}
          </div>

          {section==="spelers" && <>
            <SectionLabel action={<button style={S.btnAdd} onClick={openAddPlayer}>+ Toevoegen</button>}>ğŸ‘¤ SPELERS</SectionLabel>
            {players.map(p=>(
              <div key={p.id} style={{...S.card,display:"flex",alignItems:"center",gap:12}}>
                <span style={{fontSize:26}}>{p.emoji}</span>
                <div style={{flex:1}}>
                  <div style={{fontWeight:700,fontSize:15}}>{p.name}</div>
                  <div style={{fontSize:12,color:"#aaa"}}>KNLTB {p.rating} Â· {p.wins}W {p.losses}L Â· {p.aces} aces</div>
                </div>
                <button style={S.iconBtn} onClick={()=>openEditPlayer(p)}>âœï¸</button>
                <button style={{...S.iconBtn,background:"#fce4ec"}} onClick={()=>deletePlayer(p.id)}>ğŸ—‘ï¸</button>
              </div>
            ))}
          </>}

          {section==="wedstrijden" && <>
            <SectionLabel action={<button style={S.btnAdd} onClick={openAddMatch}>+ Toevoegen</button>}>ğŸ¾ WEDSTRIJDEN</SectionLabel>
            {matches.map(m=>(
              <div key={m.id} style={{...S.card,borderLeft:`4px solid ${m.done?"#4caf50":"#2196f3"}`}}>
                <div style={{display:"flex",alignItems:"flex-start",gap:8}}>
                  <div style={{flex:1}}>
                    <div style={{fontWeight:700,fontSize:15}}>vs {m.opponent}</div>
                    <div style={{fontSize:12,color:"#888"}}>ğŸ“… {m.date} Â· {getClub(m.clubId).name||"?"}</div>
                    <div style={{fontSize:12,color:"#888"}}>{m.done?`âœ… ${m.score}`:"ğŸ”µ Gepland"}</div>
                  </div>
                  <button style={S.iconBtn} onClick={()=>openEditMatch(m)}>âœï¸</button>
                  <button style={{...S.iconBtn,background:"#fce4ec"}} onClick={()=>deleteMatch(m.id)}>ğŸ—‘ï¸</button>
                </div>
              </div>
            ))}
          </>}

          {section==="clubs" && <>
            <SectionLabel action={<button style={S.btnAdd} onClick={openAddClub}>+ Toevoegen</button>}>ğŸ“ CLUBS</SectionLabel>
            {clubs.map(c=>(
              <div key={c.id} style={{...S.card,display:"flex",alignItems:"center",gap:12}}>
                <span style={{fontSize:26}}>{c.home?"ğŸ ":"âœˆï¸"}</span>
                <div style={{flex:1}}>
                  <div style={{fontWeight:700,fontSize:15}}>{c.name}</div>
                  <div style={{fontSize:12,color:"#aaa"}}>{c.address}</div>
                </div>
                <button style={S.iconBtn} onClick={()=>openEditClub(c)}>âœï¸</button>
                <button style={{...S.iconBtn,background:"#fce4ec"}} onClick={()=>deleteClub(c.id)}>ğŸ—‘ï¸</button>
              </div>
            ))}
          </>}

          {section==="challenges" && <>
            <SectionLabel action={<button style={S.btnAdd} onClick={openAddChallenge}>+ Toevoegen</button>}>âš¡ CHALLENGES</SectionLabel>
            {challenges.map(c=>(
              <div key={c.id} style={{...S.card,display:"flex",alignItems:"center",gap:12}}>
                <span style={{fontSize:26}}>{c.icon}</span>
                <div style={{flex:1}}>
                  <div style={{fontWeight:700,fontSize:15}}>{c.title}</div>
                  <div style={{fontSize:12,color:"#aaa"}}>{c.desc} Â· <strong>{c.pts} pt</strong></div>
                </div>
                <button style={S.iconBtn} onClick={()=>openEditChallenge(c)}>âœï¸</button>
                <button style={{...S.iconBtn,background:"#fce4ec"}} onClick={()=>deleteChallenge(c.id)}>ğŸ—‘ï¸</button>
              </div>
            ))}
          </>}

          {modal==="player" && (
            <Modal title={editItem?"Speler bewerken":"Nieuwe speler"} onClose={()=>setModal(null)}>
              <div style={S.subLabel}>NAAM</div>
              <input style={S.input} placeholder="Naam speler" value={pForm.name} onChange={e=>setPForm(f=>({...f,name:e.target.value}))}/>
              <div style={S.subLabel}>EMOJI</div>
              <div style={{display:"flex",flexWrap:"wrap",gap:8,marginBottom:12}}>
                {EMOJIS.map(em=>(
                  <button key={em} onClick={()=>setPForm(f=>({...f,emoji:em}))}
                    style={{fontSize:22,background:pForm.emoji===em?"#fff3e0":"#f5f5f5",
                      border:pForm.emoji===em?"2px solid #e53935":"2px solid transparent",
                      borderRadius:10,padding:"4px 8px",cursor:"pointer"}}>
                    {em}
                  </button>
                ))}
              </div>
              <div style={{display:"flex",gap:8,flexWrap:"wrap"}}>
                {[["wins","Gewonnen"],["losses","Verloren"],["sets_won","Sets gew."],["aces","Aces"],["rating","Rating"]].map(([key,lab])=>(
                  <div key={key} style={{flex:1,minWidth:80}}>
                    <div style={{fontSize:11,color:"#aaa",marginBottom:3}}>{lab}</div>
                    <input style={S.input} value={pForm[key]||""} onChange={e=>setPForm(f=>({...f,[key]:key==="rating"?e.target.value:+e.target.value}))}/>
                  </div>
                ))}
              </div>
              <div style={S.btnRow}>
                <button style={S.btnPrimary} onClick={savePlayer}>âœ… Opslaan</button>
                <button style={S.btnSecondary} onClick={()=>setModal(null)}>Annuleer</button>
              </div>
            </Modal>
          )}
          {modal==="match" && (
            <Modal title={editItem?"Wedstrijd bewerken":"Nieuwe wedstrijd"} onClose={()=>setModal(null)}>
              <div style={S.subLabel}>TEGENSTANDER</div>
              <input style={S.input} placeholder="Naam tegenstander" value={mForm.opponent} onChange={e=>setMForm(f=>({...f,opponent:e.target.value}))}/>
              <div style={S.subLabel}>DATUM</div>
              <input style={S.input} placeholder="bijv. 14 mrt" value={mForm.date} onChange={e=>setMForm(f=>({...f,date:e.target.value}))}/>
              <div style={S.subLabel}>LOCATIE</div>
              <select style={{...S.input,appearance:"none"}} value={mForm.clubId} onChange={e=>setMForm(f=>({...f,clubId:+e.target.value}))}>
                {clubs.map(c=>(<option key={c.id} value={c.id}>{c.home?"ğŸ ":"âœˆï¸"} {c.name}</option>))}
              </select>
              <div style={{display:"flex",alignItems:"center",gap:10,marginTop:12,marginBottom:4}}>
                <input type="checkbox" id="done" checked={mForm.done} onChange={e=>setMForm(f=>({...f,done:e.target.checked}))} style={{width:18,height:18,cursor:"pointer"}}/>
                <label htmlFor="done" style={{fontSize:14,fontWeight:600,cursor:"pointer"}}>Wedstrijd is gespeeld</label>
              </div>
              {mForm.done && <input style={S.input} placeholder="Eindstand (bijv. 4-2)" value={mForm.score} onChange={e=>setMForm(f=>({...f,score:e.target.value}))}/>}
              <div style={S.btnRow}>
                <button style={S.btnPrimary} onClick={saveMatch}>âœ… Opslaan</button>
                <button style={S.btnSecondary} onClick={()=>setModal(null)}>Annuleer</button>
              </div>
            </Modal>
          )}
          {modal==="club" && (
            <Modal title={editItem?"Club bewerken":"Nieuwe club"} onClose={()=>setModal(null)}>
              <div style={S.subLabel}>NAAM</div>
              <input style={S.input} placeholder="Naam club" value={cForm.name} onChange={e=>setCForm(f=>({...f,name:e.target.value}))}/>
              <div style={S.subLabel}>STAD</div>
              <input style={S.input} placeholder="Stad" value={cForm.city} onChange={e=>setCForm(f=>({...f,city:e.target.value}))}/>
              <div style={S.subLabel}>ADRES (voor routeknop)</div>
              <input style={S.input} placeholder="Straat + nr, Stad" value={cForm.address} onChange={e=>setCForm(f=>({...f,address:e.target.value}))}/>
              <div style={{display:"flex",alignItems:"center",gap:10,marginTop:12,marginBottom:4}}>
                <input type="checkbox" id="home" checked={cForm.home} onChange={e=>setCForm(f=>({...f,home:e.target.checked}))} style={{width:18,height:18,cursor:"pointer"}}/>
                <label htmlFor="home" style={{fontSize:14,fontWeight:600,cursor:"pointer"}}>ğŸ  Dit is onze thuisclub</label>
              </div>
              <div style={S.btnRow}>
                <button style={S.btnPrimary} onClick={saveClub}>âœ… Opslaan</button>
                <button style={S.btnSecondary} onClick={()=>setModal(null)}>Annuleer</button>
              </div>
            </Modal>
          )}
          {modal==="challenge" && (
            <Modal title={editItem?"Challenge bewerken":"Nieuwe challenge"} onClose={()=>setModal(null)}>
              <div style={S.subLabel}>ICOON</div>
              <div style={{display:"flex",flexWrap:"wrap",gap:8,marginBottom:12}}>
                {CHALLENGE_ICONS.map(em=>(
                  <button key={em} onClick={()=>setChForm(f=>({...f,icon:em}))}
                    style={{fontSize:22,background:chForm.icon===em?"#fff3e0":"#f5f5f5",
                      border:chForm.icon===em?"2px solid #e53935":"2px solid transparent",
                      borderRadius:10,padding:"4px 8px",cursor:"pointer"}}>
                    {em}
                  </button>
                ))}
              </div>
              <div style={S.subLabel}>NAAM</div>
              <input style={S.input} placeholder="Naam challenge" value={chForm.title}
                onChange={e=>setChForm(f=>({...f,title:e.target.value}))}/>
              <div style={S.subLabel}>OMSCHRIJVING</div>
              <input style={S.input} placeholder="Wat moet je doen?" value={chForm.desc}
                onChange={e=>setChForm(f=>({...f,desc:e.target.value}))}/>
              <div style={S.subLabel}>PUNTEN</div>
              <input style={S.input} placeholder="bijv. 50" type="number" value={chForm.pts}
                onChange={e=>setChForm(f=>({...f,pts:+e.target.value}))}/>
              <div style={S.btnRow}>
                <button style={S.btnPrimary} onClick={saveChallenge}>âœ… Opslaan</button>
                <button style={S.btnSecondary} onClick={()=>setModal(null)}>Annuleer</button>
              </div>
            </Modal>
          )}
        </div>
      );
    }

    // â”€â”€ MAIN APP â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    function App() {
      const [tab,        setTab]        = useState("scores");
      const [players,    setPlayers]    = useState(()=>load("players",    INIT_PLAYERS));
      const [matches,    setMatches]    = useState(()=>load("matches",    INIT_MATCHES));
      const [clubs,      setClubs]      = useState(()=>load("clubs",      INIT_CLUBS));
      const [knltb,      setKnltb]      = useState(()=>load("knltb",      INIT_KNLTB));
      const [challenges, setChallenges] = useState(()=>load("challenges", DEFAULT_CHALLENGES));

      return (
        <div style={S.app}>
          <header style={S.header}>
            <div style={{position:"relative",zIndex:1,display:"flex",justifyContent:"space-between",alignItems:"center"}}>
              <div>
                <div style={S.headerTitle}>ğŸ¾ Holy Mackerel!</div>
                <div style={S.headerSub}>Competitieseizoen 2026</div>
              </div>
              <div style={S.liveBadge}><span style={S.liveDot}/>LIVE</div>
            </div>
            <div style={{position:"absolute",inset:0,backgroundImage:"radial-gradient(circle at 80% 50%,rgba(255,87,34,.15) 0%,transparent 60%)",pointerEvents:"none"}}/>
          </header>
          <main style={S.main}>
            {tab==="scores" && <ScoresScreen matches={matches} setMatches={setMatches} players={players} clubs={clubs}/>}
            {tab==="stand"  && <StandScreen  players={players} knltb={knltb} setKnltb={setKnltb}/>}
            {tab==="schema" && <SchemaScreen matches={matches} clubs={clubs} players={players}/>}
            {tab==="stats"  && <StatsScreen  players={players} setPlayers={setPlayers}/>}
            {tab==="fun"    && <FunScreen    players={players} challenges={challenges}/>}
            {tab==="beheer" && <BeheerScreen players={players} setPlayers={setPlayers} matches={matches} setMatches={setMatches} clubs={clubs} setClubs={setClubs} challenges={challenges} setChallenges={setChallenges}/>}
          </main>
          <TabBar active={tab} setActive={setTab}/>
        </div>
      );
    }

    // â”€â”€ STYLES â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    const S = {
      app:               {fontFamily:"'DM Sans','Segoe UI',sans-serif",background:"#f7f7f5",minHeight:"100vh",maxWidth:480,margin:"0 auto",display:"flex",flexDirection:"column",position:"relative"},
      header:            {background:"linear-gradient(135deg,#1a1a2e 0%,#16213e 60%,#0f3460 100%)",color:"#fff",padding:"22px 20px 16px",position:"relative",overflow:"hidden"},
      headerTitle:       {fontSize:26,fontWeight:900,letterSpacing:-0.5},
      headerSub:         {fontSize:11,color:"#ff9a7b",fontWeight:700,letterSpacing:2,textTransform:"uppercase",marginTop:2},
      liveBadge:         {background:"rgba(255,87,34,.2)",border:"1px solid rgba(255,87,34,.5)",borderRadius:20,padding:"5px 12px",fontSize:11,fontWeight:800,color:"#ff9a7b",display:"flex",alignItems:"center",gap:6,letterSpacing:1},
      liveDot:           {width:7,height:7,borderRadius:"50%",background:"#ff5722",boxShadow:"0 0 6px #ff5722",display:"inline-block"},
      main:              {flex:1,overflowY:"auto",paddingBottom:80},
      screen:            {padding:"14px 14px 0"},
      section:           {fontSize:11,fontWeight:800,letterSpacing:1.5,color:"#888",textTransform:"uppercase",marginBottom:10,marginTop:10},
      subLabel:          {fontSize:10,fontWeight:800,letterSpacing:1.5,color:"#aaa",textTransform:"uppercase",marginBottom:6,marginTop:10},
      card:              {background:"#fff",borderRadius:16,padding:16,marginBottom:12,boxShadow:"0 2px 12px rgba(0,0,0,.06)"},
      matchHeader:       {display:"flex",justifyContent:"space-between",alignItems:"flex-start",gap:10},
      matchTitle:        {fontSize:17,fontWeight:800},
      matchMeta:         {fontSize:12,color:"#888",marginTop:2},
      playerGrid:        {display:"flex",flexWrap:"wrap",gap:6,marginTop:4},
      playerChip:        {border:"1.5px solid #e0e0e0",borderRadius:20,padding:"5px 12px",fontWeight:600,cursor:"pointer",fontSize:13,fontFamily:"inherit",background:"#f9f9f9",color:"#555",transition:"all .15s"},
      playerChipSel:     {background:"#e53935",color:"#fff",border:"1.5px solid #e53935",boxShadow:"0 2px 8px rgba(229,57,53,.3)"},
      playerTag:         {background:"#fff3e0",borderRadius:12,padding:"3px 10px",fontSize:12,fontWeight:700,color:"#e65100"},
      mapBtn:            {background:"linear-gradient(135deg,#1a73e8,#1557b0)",color:"#fff",borderRadius:10,padding:"7px 14px",fontSize:12,fontWeight:700,whiteSpace:"nowrap",border:"none",cursor:"pointer",display:"inline-flex",alignItems:"center",gap:4},
      editBox:           {marginTop:12,display:"flex",flexDirection:"column",gap:8},
      input:             {border:"1.5px solid #eee",borderRadius:10,padding:"9px 12px",fontSize:14,fontFamily:"'DM Sans',sans-serif",outline:"none",width:"100%",transition:"border-color .2s",background:"#fafafa"},
      btnRow:            {display:"flex",gap:8,marginTop:8},
      btnPrimary:        {flex:1,background:"linear-gradient(135deg,#e53935,#ff7043)",color:"#fff",border:"none",borderRadius:10,padding:"11px 0",fontWeight:800,cursor:"pointer",fontSize:14,fontFamily:"inherit",boxShadow:"0 3px 10px rgba(229,57,53,.25)",marginTop:8,display:"block",textAlign:"center",width:"100%"},
      btnSecondary:      {background:"#f5f5f5",color:"#666",border:"none",borderRadius:10,padding:"11px 16px",fontWeight:600,cursor:"pointer",fontSize:14,fontFamily:"inherit",marginTop:8},
      btnSmall:          {background:"#f5f5f5",color:"#555",border:"none",borderRadius:8,padding:"5px 10px",fontWeight:700,cursor:"pointer",fontSize:12,fontFamily:"inherit"},
      btnAdd:            {background:"linear-gradient(135deg,#e53935,#ff7043)",color:"#fff",border:"none",borderRadius:8,padding:"5px 12px",fontWeight:700,cursor:"pointer",fontSize:12,fontFamily:"inherit",boxShadow:"0 2px 6px rgba(229,57,53,.3)"},
      iconBtn:           {background:"#f5f5f5",border:"none",borderRadius:8,padding:"6px 9px",cursor:"pointer",fontSize:15,lineHeight:1},
      chip:              {fontSize:11,fontWeight:700,borderRadius:6,padding:"2px 7px",display:"inline-block"},
      playerName:        {fontWeight:800,fontSize:16},
      barWrap:           {background:"#f0f0f0",borderRadius:4,height:5,marginTop:6,overflow:"hidden"},
      barFill:           {background:"linear-gradient(90deg,#e53935,#ff7043)",height:"100%",borderRadius:4,transition:"width .6s ease"},
      playerScroll:      {display:"flex",gap:8,overflowX:"auto",paddingBottom:8,marginBottom:12},
      playerScrollBtn:   {display:"flex",flexDirection:"column",alignItems:"center",gap:4,padding:"10px 14px",borderRadius:14,border:"1.5px solid #e0e0e0",background:"#fff",cursor:"pointer",fontFamily:"inherit",minWidth:60,flexShrink:0,color:"#333",transition:"all .15s"},
      playerScrollBtnSel:{background:"#1a1a2e",color:"#fff",border:"1.5px solid #1a1a2e",boxShadow:"0 3px 10px rgba(0,0,0,.2)"},
      ptsBadge:          {background:"linear-gradient(135deg,#e53935,#ff7043)",color:"#fff",borderRadius:10,padding:"4px 10px",fontWeight:800,fontSize:13,whiteSpace:"nowrap"},
      challengeBtn:      {border:"none",borderRadius:20,padding:"6px 13px",fontWeight:600,cursor:"pointer",fontSize:16,fontFamily:"inherit",transition:"all .2s",minWidth:44},
      segmentWrap:       {display:"flex",gap:6,marginBottom:14,marginTop:4,overflowX:"auto"},
      segmentBtn:        {flex:1,background:"#f0f0f0",border:"none",borderRadius:10,padding:"9px 4px",fontWeight:700,cursor:"pointer",fontSize:12,fontFamily:"inherit",color:"#888",transition:"all .15s"},
      segmentBtnActive:  {background:"#1a1a2e",color:"#fff",boxShadow:"0 2px 8px rgba(0,0,0,.2)"},
      segmentCount:      {background:"rgba(255,255,255,.25)",borderRadius:8,padding:"1px 6px",fontSize:11,marginLeft:4},
      modalOverlay:      {position:"fixed",inset:0,background:"rgba(0,0,0,.5)",zIndex:200,display:"flex",alignItems:"flex-end",justifyContent:"center"},
      modalBox:          {background:"#fff",borderRadius:"20px 20px 0 0",width:"100%",maxWidth:480,maxHeight:"85vh",overflowY:"auto",boxShadow:"0 -8px 30px rgba(0,0,0,.15)"},
      modalHeader:       {display:"flex",justifyContent:"space-between",alignItems:"center",padding:"18px 16px 12px",borderBottom:"1px solid #f0f0f0"},
      modalTitle:        {fontWeight:800,fontSize:17},
      modalClose:        {background:"#f5f5f5",border:"none",borderRadius:8,padding:"6px 10px",cursor:"pointer",fontWeight:700,fontSize:14},
      tabBar:            {position:"fixed",bottom:0,left:"50%",transform:"translateX(-50%)",width:"100%",maxWidth:480,background:"#fff",borderTop:"1px solid #eee",display:"flex",boxShadow:"0 -4px 20px rgba(0,0,0,.08)",zIndex:100},
      tabBtn:            {flex:1,background:"none",border:"none",padding:"10px 0 8px",cursor:"pointer",display:"flex",flexDirection:"column",alignItems:"center",gap:2,position:"relative",color:"#bbb",transition:"color .2s",fontFamily:"inherit"},
      tabActive:         {color:"#e53935"},
      tabLabel:          {fontSize:9,fontWeight:700,letterSpacing:0.5,textTransform:"uppercase"},
      tabIndicator:      {position:"absolute",top:0,left:"20%",right:"20%",height:3,background:"#e53935",borderRadius:"0 0 3px 3px"},
    };

    ReactDOM.createRoot(document.getElementById("root")).render(<App />);
  </script>
</body>
</html>
